<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WordPress Trunk</title><link rel="stylesheet" href="css/black-tie/jquery-ui-1.8.2.custom.css" type="text/css"></link><link rel="stylesheet" href="css/jquery.treeview.css" type="text/css"></link><link rel="stylesheet" href="css/theme.css" type="text/css"></link><script type="text/javascript" src="js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="js/jquery.cookie.js"></script><script type="text/javascript" src="js/jquery.treeview.js"></script><script type="text/javascript">
            $(document).ready(function() {
                $(".filetree").treeview({
                    collapsed: true,
                    persist: "cookie"
                });

                $("#accordion").accordion({
                    collapsible: true,
                    autoHeight:  false,
                    fillSpace:   true
                });

                $(".tabs").tabs();
            });
        </script></head><body><div xmlns="" id="content">
<script type="text/javascript" src="js/menu.js"></script><script>

      function filterElements()
      {
        inherited = !$('a#show-inherited').hasClass('deselected');
        public    = !$('a#show-public').hasClass('deselected');
        protected = !$('a#show-protected').hasClass('deselected');
        private   = !$('a#show-private').hasClass('deselected');

        $('div.public').each(function(index, val) {
            $(val).toggle(public && !($(val).hasClass('inherited_from') && !inherited));
        });
        $('div.protected').each(function(index, val) {
            $(val).toggle(protected && !($(val).hasClass('inherited_from') && !inherited));
        });
        $('div.private').each(function(index, val) {
            $(val).toggle(private && !($(val).hasClass('inherited_from') && !inherited));
        });
      }

      $(document).ready(function() {
        $('a.gripper').click(function() {
            $(this).nextAll('div.code-tabs').slideToggle();
            $(this).children('img').toggle();
            return false;
        });

        $('div.method code span.highlight,div.function code span.highlight,div.constant code span.highlight,div.property code span.highlight').css('cursor', 'pointer');

        $('div.method code span.highlight,div.function code span.highlight,div.constant code span.highlight,div.property code span.highlight').click(function() {
            $(this).parent().nextAll('div.code-tabs').slideToggle();
            $(this).parent().prevAll('a.gripper').children('img').toggle();
            return false;
        });

        $('div.code-tabs').hide();
        $('a.gripper').show();
        $('div.code-tabs:empty').prevAll('a.gripper').html('');
        $('div.file-nav').show();

        $('a#show-public, a#show-protected, a#show-private, a#show-inherited').click(function(){
            $(this).toggleClass('deselected');
            if ($(this).hasClass('deselected')) {
              $(this).fadeTo('fast', '0.4');
            } else {
              $(this).fadeTo('fast', '1.0');
            }
            filterElements();
            return false;
        });
        $('a#show-protected, a#show-private').click();

      });
      
    </script><h1 class="file">wp-admin/includes/update-core.php</h1>
<div class="file-nav">
<ul id="file-nav"><li><a href="#top">Global</a></li></ul>
<div style="float: right;padding-right: 20px;">
              Show:
              <a href="#" id="show-public"><img src="images/icons/visibility_public.png"></a><a href="#" id="show-protected"><img src="images/icons/visibility_protected.png"></a><a href="#" id="show-private"><img src="images/icons/visibility_private.png"></a><a href="#" id="show-inherited"><span class="attribute">inherited</span></a>
</div>
</div>
<a name="top" class="anchor"></a><div id="file-description">
<p class="short-description">WordPress core upgrade functionality.</p>
<div class="long-description">
</div>
</div>
<dl class="file-info">
<dt>Package</dt>
<dd>WordPress
         
    </dd>
<dt>Since</dt>
<dd>2.7.0
         
    </dd>
<dt>Subpackage</dt>
<dd>Administration
         
    </dd>
</dl>
<a name="functions" class="anchor"></a><h2>Functions</h2>
<div>
<a id="::update_core()" class="anchor"></a><div class="function ">
<a href="#" class="gripper"><img src="images/icons/arrow_right.png"><img src="images/icons/arrow_down.png" style="display: none;"></a><code><img src="images/icons/function.png" alt="function"><span class="highlight">update_core</span><span class="nb-faded-text">(
          string $from, string $to
          )
        </span>
        :
          <a href="db_wp-includes_class-wp-error.html#%5CWP_Error">\WP_Error</a>|null</code><div class="description"><p class="short_description">Upgrade the core of WordPress.</p></div>
<div class="code-tabs">
<div class="long-description"><p>This will create a .maintenance file at the base of the WordPress directory
to ensure that people can not access the web site, when the files are being
copied to their locations.</p>

<p>The files in the {@link $_old_files} list will be removed and the new files
copied from the zip file after the database is upgraded.</p>

<p>The files in the {@link $_new_bundled_files} list will be added to the installation
if the version is greater than or equal to the old version being upgraded.</p>

<p>The steps for the upgrader for after the new release is downloaded and
unzipped is:
  1. Test unzipped location for select files to ensure that unzipped worked.
  2. Create the .maintenance file in current WordPress base.
  3. Copy new WordPress directory over old WordPress files.
  4. Upgrade WordPress to new version.
    4.1. Copy all files/folders other than wp-content
    4.2. Copy any language files to WP_LANG_DIR (which may differ from WP_CONTENT_DIR
    4.3. Copy any new bundled themes/plugins to their respective locations
  5. Delete new WordPress directory path.
  6. Delete .maintenance file.
  7. Remove old files.
  8. Delete 'update_core' option.</p>

<p>There are several areas of failure. For instance if PHP times out before step
6, then you will not be able to access any portion of your site. Also, since
the upgrade will not continue where it left off, you will not be able to
automatically remove old files and remove the 'update_core' option. This
isn't that bad.</p>

<p>If the copy of the new WordPress over the old fails, then the worse is that
the new WordPress directory will remain.</p>

<p>If it is assumed that every file will be copied over, including plugins and
themes, then if you edit the default theme, you should rename it, so that
your changes remain.</p>
</div>
<strong>Parameters</strong><table class="argument-info">
<thead><tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<th>$from</th>
<td>string</td>
<td><em><p>New release unzipped path.</p></em></td>
</tr>
<tr>
<th>$to</th>
<td>string</td>
<td><em><p>Path to old WordPress installation.</p></em></td>
</tr>
</table>
<strong>Returns</strong><table class="argument-info">
<thead><tr>
<th>Type</th>
<th>Description</th>
</tr></thead>
<tr>
<td>
<a href="db_wp-includes_class-wp-error.html#%5CWP_Error">\WP_Error</a>|null</td>
<td>WP_Error on failure, null on success.</td>
</tr>
</table>
<strong>Details</strong><dl class="function-info">
<dt>Since</dt>
<dd>2.7.0
         
    </dd>
</dl>
</div>
<div class="clear"></div>
</div>
</div>
</div>
<small xmlns="" class="footer">Documentation was generated by <a href="http://docblox-project.org">DocBlox 0.14.1</a>.
    </small></body></html>
